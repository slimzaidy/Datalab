import numpy as np
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score
from sklearn.cluster import KMeans
import numpy as np
import matplotlib.pyplot as plt
adressA_list =[]
adressB_list =[]
portA_list = []
portB_list = []
packets_list = []
Bytes_list= []
Bytes_A_B_list = []
Bytes_B_A_list = []
Realstart_list = []
duration_list = []
bits_A_B_list = []
bits_B_A_list = []

#upload the dat file
path = r"C:\Users\oussa\Downloads\data.csv"
data = pd.read_csv(path)

"""
data["Address A"] = adressA_list
data["Address B"] = adressB_list
data["Port A"] = portA_list
data["Port B"] = portB_list
data["Packets"] = packets_list
data["Duration"] = duration_list
data["Bytes"] = Bytes_list
data["Real Start"] = Realstart_list
data["Bits/s A → B"] = bits_A_B_list
data["Bits/s B → A"] = bits_B_A_list
data["Bytes/s A → B"] = Bytes_A_B_list
data["Bytes/s B → A"] = Bytes_B_A_list
"""
data_new = data.rename(columns={"Bytes/s A → B": 'Bytes/s AB', "Bytes/s B → A": "Bytes/s BA"})
#y = np.array(data_new["Address A"]+data_new["Address B"], data_new["Port A"])
x = np.array(data_new["Port B"] +data_new["Packets"] +data_new["Duration"] +data_new["Bytes"] +data_new["Rel Start"] +data_new["Bits/s A → B"] +data_new["Bits/s B → A"])
print(data)
X_train, X_test = train_test_split(
    x,
    test_size=0.1,
    shuffle=True)
model = KMeans(n_clusters=5, random_state=0)
model.fit(X_train.reshape(-1,1))
y_hat = model.predict(X_test.reshape(-1,1))
print("x")
plt.scatter(X_test, y_hat)
plt.show()
#accuracy = accuracy_score(y_test.values.ravel(), y_hat)
#print(accuracy)
